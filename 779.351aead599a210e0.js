"use strict";(self.webpackChunkgemini_angular=self.webpackChunkgemini_angular||[]).push([[779],{7779:(M,d,o)=>{o.r(d),o.d(d,{GeminiProStreamingComponent:()=>G});var y=o(467);function u(s){function a(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(n){return{value:n,done:t}})}return(u=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return a(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):a(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):a(n.apply(this.s,arguments))}},new u(s)}var r=o(4438),c=o(4350),S=o(5312),C=o(697),A=o(3819);const E=new c.ij(S.c.API_KEY).getGenerativeModel({model:"gemini-1.5-pro",safetySettings:[{category:c.DE.HARM_CATEGORY_HARASSMENT,threshold:c.vk.BLOCK_ONLY_HIGH}],temperature:.9,top_p:1,top_k:32,maxOutputTokens:100});let G=(()=>{class s{constructor(){this.messages=(0,r.vPA)([]),this.markdown=(0,r.WQX)(A.R)}enter(e){this.updateMessage(e),this.sendMessage(e)}updateMessage(e,t=!0){e&&this.messages.set([...this.messages(),{content:e,isUser:t}])}sendMessage(e){var t=this;return(0,y.A)(function*(){const n={contents:[{role:"user",parts:[{text:e}]}]},m=yield E.generateContentStream(n);var p,i=!1,f=!1;try{for(var h,g=function v(s){var a,e,t,n=2;for(typeof Symbol<"u"&&(e=Symbol.asyncIterator,t=Symbol.iterator);n--;){if(e&&null!=(a=s[e]))return a.call(s);if(t&&null!=(a=s[t]))return new u(a.call(s));e="@@asyncIterator",t="@@iterator"}throw new TypeError("Object is not async iterable")}(m.stream);i=!(h=yield g.next()).done;i=!1){const l=h.value;console.log("stream chunk: "+l.text()),t.updateMessage(l.text()??"",!1)}}catch(l){f=!0,p=l}finally{try{i&&null!=g.return&&(yield g.return())}finally{if(f)throw p}}const j=(yield m.response).text();console.log("aggregated response: "+j)})()}static#e=this.\u0275fac=function(t){return new(t||s)};static#t=this.\u0275cmp=r.VBU({type:s,selectors:[["ga-gemini-pro-streaming"]],standalone:!0,features:[r.aNF],decls:3,vars:1,consts:[[3,"send","messages"]],template:function(t,n){1&t&&(r.j41(0,"h5"),r.EFF(1,"Content as is created using streaming (stream)"),r.k0s(),r.j41(2,"ga-chat",0),r.bIt("send",function(i){return n.enter(i)}),r.k0s()),2&t&&(r.R7$(2),r.Y8G("messages",n.messages()))},dependencies:[C.K]})}return s})()}}]);