"use strict";(self.webpackChunkgemini_angular=self.webpackChunkgemini_angular||[]).push([[497],{4497:(M,g,r)=>{r.r(g),r.d(g,{GeminiProVisionImagesComponent:()=>B});var d=r(467),e=r(4438),f=r(1626),h=r(9350),v=r(7707);let C=(()=>{class o{constructor(){this.http=(0,e.WQX)(f.Qq)}convertToBase64(s){var t=this;return(0,d.A)(function*(){const n=yield function y(o,p){const s="object"==typeof p;return new Promise((t,n)=>{const a=new v.Ms({next:c=>{t(c),a.unsubscribe()},error:n,complete:()=>{s?t(p.defaultValue):n(new h.G)}});o.subscribe(a)})}(t.http.get(s,{responseType:"blob"}));return new Promise((a,c)=>{const i=new FileReader;i.onloadend=()=>{const m=i.result;a(m.substring(m.indexOf(",")+1))},i.onerror=m=>{c(m)},i.readAsDataURL(n)})})()}static#e=this.\u0275fac=function(t){return new(t||o)};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var l=r(4350),G=r(5312),T=r(697);const u="assets/pankaj.jpeg",b=new l.ij(G.c.API_KEY).getGenerativeModel({model:"gemini-pro-vision",safetySettings:[{category:l.DE.HARM_CATEGORY_HARASSMENT,threshold:l.vk.BLOCK_ONLY_HIGH}],maxOutputTokens:100});let B=(()=>{class o{constructor(){this.messages=(0,e.vPA)([]),this.img=u,this.fileConversionService=(0,e.WQX)(C)}enter(s){this.updateMessage(s),this.sendMessage(s)}updateMessage(s,t=!0){s&&this.messages.set([...this.messages(),{content:s,isUser:t}])}sendMessage(s){var t=this;return(0,d.A)(function*(){try{let n=yield t.fileConversionService.convertToBase64(u);if("string"!=typeof n)return void console.error("Image conversion to Base64 failed.");let a=[{inlineData:{mimeType:"image/jpeg",data:n}},{text:s}];const i=yield(yield b.generateContent(a)).response;console.log(i.candidates?.[0].content.parts[0].text),console.log(i),t.updateMessage(i.candidates?.[0].content.parts[0].text??"",!1)}catch(n){console.error("Error converting file to Base64",n)}})()}static#e=this.\u0275fac=function(t){return new(t||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["ga-gemini-pro-vision-images"]],standalone:!0,features:[e.aNF],decls:4,vars:2,consts:[["width","400",3,"src"],[3,"send","messages"]],template:function(t,n){1&t&&(e.j41(0,"h5"),e.EFF(1,"Text from text-and-images input (multimodal)"),e.k0s(),e.nrm(2,"img",0),e.j41(3,"ga-chat",1),e.bIt("send",function(c){return n.enter(c)}),e.k0s()),2&t&&(e.R7$(2),e.Y8G("src",n.img,e.B4B),e.R7$(),e.Y8G("messages",n.messages()))},dependencies:[T.K]})}return o})()}}]);