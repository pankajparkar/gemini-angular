"use strict";(self.webpackChunkgemini_angular=self.webpackChunkgemini_angular||[]).push([[779],{7779:(j,d,a)=>{a.r(d),a.d(d,{GeminiProStreamingComponent:()=>E});var y=a(467);function u(s){function o(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(n){return{value:n,done:t}})}return(u=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return o(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):o(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):o(n.apply(this.s,arguments))}},new u(s)}var r=a(4438),c=a(4350),S=a(5312),C=a(697);const P=new c.ij(S.c.API_KEY).getGenerativeModel({model:"gemini-pro",safetySettings:[{category:c.DE.HARM_CATEGORY_HARASSMENT,threshold:c.vk.BLOCK_ONLY_HIGH}],temperature:.9,top_p:1,top_k:32,maxOutputTokens:100});let E=(()=>{class s{constructor(){this.messages=(0,r.vPA)([])}enter(e){this.updateMessage(e),this.sendMessage(e)}updateMessage(e,t=!0){e&&this.messages.set([...this.messages(),{content:e,isUser:t}])}sendMessage(e){var t=this;return(0,y.A)(function*(){const n={contents:[{role:"user",parts:[{text:e}]}]},m=yield P.generateContentStream(n);var f,i=!1,p=!1;try{for(var h,g=function v(s){var o,e,t,n=2;for(typeof Symbol<"u"&&(e=Symbol.asyncIterator,t=Symbol.iterator);n--;){if(e&&null!=(o=s[e]))return o.call(s);if(t&&null!=(o=s[t]))return new u(o.call(s));e="@@asyncIterator",t="@@iterator"}throw new TypeError("Object is not async iterable")}(m.stream);i=!(h=yield g.next()).done;i=!1){const l=h.value;console.log("stream chunk: "+l.text()),t.updateMessage(l.text()??"",!1)}}catch(l){p=!0,f=l}finally{try{i&&null!=g.return&&(yield g.return())}finally{if(p)throw f}}const G=(yield m.response).text();console.log("aggregated response: "+G)})()}static#e=this.\u0275fac=function(t){return new(t||s)};static#t=this.\u0275cmp=r.VBU({type:s,selectors:[["ga-gemini-pro-streaming"]],standalone:!0,features:[r.aNF],decls:3,vars:1,consts:[[3,"send","messages"]],template:function(t,n){1&t&&(r.j41(0,"h5"),r.EFF(1,"Content as is created using streaming (stream)"),r.k0s(),r.j41(2,"ga-chat",0),r.bIt("send",function(i){return n.enter(i)}),r.k0s()),2&t&&(r.R7$(2),r.Y8G("messages",n.messages()))},dependencies:[C.K]})}return s})()}}]);